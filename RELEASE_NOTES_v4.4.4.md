# Miaoda v4.4.4 发布说明

发布日期：2025-07-28

## 🎯 版本亮点

本版本重点解决了 JavaScript 缓存问题，完善了配置管理界面的交互体验，确保用户始终使用最新版本的代码。

## 🚀 新增功能

### 1. 完整的缓存管理系统
- 🧹 实现了多层次的缓存防护策略
- 🔄 应用启动时自动检测版本变化并清理缓存
- 🛠️ 开发模式下完全禁用缓存
- 📱 在环境检测面板添加"清理缓存"按钮

### 2. 配置管理界面功能完善
- ✨ 添加"保存并启动代理"一键操作
- 🔄 添加"还原 Claude Code 官方配置"功能
- ✅ 添加"使用此配置"快速切换按钮
- 🔀 ConfigManager 和 ConfigWizard 之间可以互相切换

### 3. 版本管理机制
- 📦 构建时自动生成版本号
- 🏷️ 所有 JS 文件动态加载时添加版本参数
- 📝 版本文件自动记录构建信息

## 🐛 修复问题

1. **修复 JS 缓存问题**
   - 解决了多次安装后仍加载旧版本 JS 的问题
   - 确保每次更新后都能正确加载最新代码

2. **修复配置界面交互问题**
   - 修复了 showPanel 函数在程序调用时的错误
   - 完善了按钮的显示逻辑和状态管理

## 💎 优化改进

1. **用户体验优化**
   - 配置保存后自动切换到终端界面
   - 操作反馈更加及时和明确
   - 按钮样式分类更清晰（主要/次要/警告/危险）

2. **开发体验优化**
   - 提供 `npm run clear-cache` 命令手动清理缓存
   - 详细的缓存解决方案文档
   - 更好的错误提示和故障排除指南

## 📚 技术细节

### 缓存管理架构
```
主进程缓存管理器 (cache-manager.js)
├── 版本变化检测
├── 自动缓存清理
├── HTTP 请求拦截
└── 开发模式特殊处理

渲染进程版本管理 (version-manager.js)
├── 动态脚本加载
├── 版本参数注入
└── 模块导入包装
```

### 新增命令
- `npm run update-version` - 更新构建版本号
- `npm run clear-cache` - 清理所有缓存

## 🔧 升级指南

1. 下载最新版本
2. 如遇到缓存问题，使用环境面板的"清理缓存"按钮
3. 开发者可使用 `npm run dev` 自动禁用缓存

## 📋 已知问题

暂无

## 🙏 致谢

感谢所有用户的反馈和建议，特别是关于缓存问题的详细报告。

---

**下载地址**：[GitHub Releases](https://github.com/miounet11/claude-code-manager/releases/tag/v4.4.4)