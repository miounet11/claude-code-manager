# Windows ç‰ˆæœ¬æ„å»ºå®Œæ•´æŒ‡å—

## ğŸ¯ æ¦‚è¿°

æœ¬æŒ‡å—è¯¦ç»†è¯´æ˜å¦‚ä½•ä¸º Miaoda é¡¹ç›®æ„å»º Windows ç‰ˆæœ¬ï¼ŒåŒ…æ‹¬æœ¬åœ°æ„å»ºå’Œè‡ªåŠ¨åŒ–æ„å»ºä¸¤ç§æ–¹å¼ã€‚

## ğŸ—ï¸ æ„å»ºæ¶æ„

### æ”¯æŒçš„æ¶æ„
- **x64**: 64ä½ Windows ç³»ç»Ÿï¼ˆæ¨èï¼‰
- **ia32**: 32ä½ Windows ç³»ç»Ÿï¼ˆå…¼å®¹æ€§ï¼‰

### è¾“å‡ºæ ¼å¼
- **NSIS å®‰è£…åŒ…**: `Miaoda-Setup-{version}.exe`
- **ä¾¿æºç‰ˆ**: `Miaoda-{version}-win.zip`

## ğŸ”§ æœ¬åœ°æ„å»ºï¼ˆWindows ç¯å¢ƒï¼‰

### ç¯å¢ƒè¦æ±‚
- Windows 10/11
- Node.js 18+
- npm æˆ– yarn
- Git

### å¿«é€Ÿæ„å»º
```cmd
# 1. å…‹éš†é¡¹ç›®
git clone https://github.com/miounet11/claude-code-manager.git
cd claude-code-manager

# 2. å®‰è£…ä¾èµ–
npm install

# 3. éªŒè¯æ„å»ºé…ç½®
node scripts\validate-win-build.js

# 4. æ‰§è¡Œæ„å»º
scripts\build-release.bat
```

### æ‰‹åŠ¨æ„å»ºé€‰é¡¹
```cmd
# æ„å»ºæ‰€æœ‰ Windows ç‰ˆæœ¬ï¼ˆNSIS + ä¾¿æºç‰ˆï¼‰
npm run dist-win

# ä»…æ„å»ºä¾¿æºç‰ˆ
npm run dist-win-portable

# æ„å»ºæ‰€æœ‰å¹³å°ï¼ˆéœ€è¦å¯¹åº”ç¯å¢ƒï¼‰
npm run dist-all
```

## ğŸ¤– è‡ªåŠ¨åŒ–æ„å»ºï¼ˆGitHub Actionsï¼‰

### è§¦å‘æ–¹å¼

#### 1. æ ‡ç­¾æ¨é€ï¼ˆæ¨èï¼‰
```bash
# åˆ›å»ºå¹¶æ¨é€ç‰ˆæœ¬æ ‡ç­¾
git tag v2.0.6
git push origin v2.0.6
```

#### 2. æ‰‹åŠ¨è§¦å‘
1. è®¿é—® [GitHub Actions](https://github.com/miounet11/claude-code-manager/actions)
2. é€‰æ‹© "Build and Release" å·¥ä½œæµ
3. ç‚¹å‡» "Run workflow"
4. è¾“å…¥ç‰ˆæœ¬å·å¹¶è¿è¡Œ

### æ„å»ºçŸ©é˜µ
```yaml
strategy:
  matrix:
    os: [windows-latest, macos-latest, ubuntu-latest]
```
- Windows ç‰ˆæœ¬åœ¨ `windows-latest` ç¯å¢ƒä¸­æ„å»º
- ç¡®ä¿ç¯å¢ƒä¸€è‡´æ€§å’Œå…¼å®¹æ€§

## ğŸ“¦ æ„å»ºäº§ç‰©è¯¦è§£

### NSIS å®‰è£…åŒ…ç‰¹æ€§
- **å®Œæ•´å®‰è£…ä½“éªŒ**: åŒ…å«å®‰è£…å‘å¯¼
- **è‡ªå®šä¹‰å®‰è£…ç›®å½•**: ç”¨æˆ·å¯é€‰æ‹©å®‰è£…ä½ç½®
- **å¿«æ·æ–¹å¼åˆ›å»º**: è‡ªåŠ¨åˆ›å»ºæ¡Œé¢å’Œå¼€å§‹èœå•å¿«æ·æ–¹å¼
- **å¸è½½ç¨‹åº**: æä¾›å®Œæ•´çš„å¸è½½åŠŸèƒ½
- **ç‰ˆæœ¬ä¿¡æ¯**: åŒ…å«åº”ç”¨ç¨‹åºç‰ˆæœ¬å’Œå…ƒæ•°æ®

### ä¾¿æºç‰ˆç‰¹æ€§
- **å…å®‰è£…**: è§£å‹å³ç”¨
- **ç»¿è‰²è½¯ä»¶**: ä¸ä¿®æ”¹ç³»ç»Ÿæ³¨å†Œè¡¨
- **é…ç½®ç‹¬ç«‹**: é…ç½®æ–‡ä»¶ä¿å­˜åœ¨åº”ç”¨ç›®å½•
- **é€‚åˆ**: éœ€è¦ä¾¿æºä½¿ç”¨çš„åœºæ™¯

## ğŸ” æ„å»ºéªŒè¯

### éªŒè¯è„šæœ¬ä½¿ç”¨
```cmd
node scripts\validate-win-build.js
```

### éªŒè¯å†…å®¹
- âœ… ç¯å¢ƒæ£€æŸ¥ï¼ˆNode.jsã€å¹³å°ã€æ¶æ„ï¼‰
- âœ… package.json é…ç½®éªŒè¯
- âœ… èµ„æºæ–‡ä»¶æ£€æŸ¥ï¼ˆå›¾æ ‡ç­‰ï¼‰
- âœ… ä¾èµ–é¡¹éªŒè¯
- âœ… æ„å»ºè„šæœ¬å®Œæ•´æ€§

### æ‰‹åŠ¨éªŒè¯
1. **æ–‡ä»¶å®Œæ•´æ€§**: ç¡®è®¤ç”Ÿæˆçš„ exe å’Œ zip æ–‡ä»¶
2. **å®‰è£…æµ‹è¯•**: æµ‹è¯• NSIS å®‰è£…åŒ…çš„å®‰è£…è¿‡ç¨‹
3. **åŠŸèƒ½æµ‹è¯•**: éªŒè¯åº”ç”¨ç¨‹åºåŸºæœ¬åŠŸèƒ½
4. **å¸è½½æµ‹è¯•**: æµ‹è¯•å®Œæ•´å¸è½½æµç¨‹

## ğŸ› ï¸ æ•…éšœæ’é™¤

### å¸¸è§é—®é¢˜

#### 1. Wine ç¯å¢ƒé”™è¯¯ï¼ˆmacOS/Linuxï¼‰
```
cannot execute cause=fork/exec .../wine64: bad CPU type in executable
```
**è§£å†³æ–¹æ¡ˆ**: 
- åœ¨ Windows ç¯å¢ƒä¸­æ„å»º
- ä½¿ç”¨ GitHub Actions è‡ªåŠ¨æ„å»º

#### 2. å›¾æ ‡æ–‡ä»¶ç¼ºå¤±
```
Error: ENOENT: no such file or directory, open 'assets/icon.ico'
```
**è§£å†³æ–¹æ¡ˆ**:
```cmd
# ç¡®ä¿å›¾æ ‡æ–‡ä»¶å­˜åœ¨
dir assets\icon.ico
# å¦‚æœç¼ºå¤±ï¼Œéœ€è¦é‡æ–°ç”Ÿæˆæˆ–å¤åˆ¶å›¾æ ‡æ–‡ä»¶
```

#### 3. ä¾èµ–é¡¹ç‰ˆæœ¬å†²çª
**è§£å†³æ–¹æ¡ˆ**:
```cmd
# æ¸…ç† node_modules å’Œé‡æ–°å®‰è£…
rmdir /s node_modules
del package-lock.json
npm install
```

#### 4. æ„å»ºæƒé™é—®é¢˜
**è§£å†³æ–¹æ¡ˆ**:
- ä»¥ç®¡ç†å‘˜æƒé™è¿è¡Œ CMD
- ç¡®ä¿é˜²ç—…æ¯’è½¯ä»¶ä¸é˜»æ­¢æ„å»ºè¿‡ç¨‹

### è°ƒè¯•æ¨¡å¼
```cmd
# å¯ç”¨è¯¦ç»†æ—¥å¿—
set DEBUG=electron-builder
npm run dist-win
```

## ğŸ“‹ æ„å»ºæ£€æŸ¥æ¸…å•

### æ„å»ºå‰æ£€æŸ¥
- [ ] éªŒè¯ Node.js ç‰ˆæœ¬ (18+)
- [ ] ç¡®è®¤æ‰€æœ‰ä¾èµ–å·²å®‰è£…
- [ ] æ£€æŸ¥å›¾æ ‡æ–‡ä»¶å®Œæ•´æ€§
- [ ] è¿è¡ŒéªŒè¯è„šæœ¬
- [ ] æ›´æ–°ç‰ˆæœ¬å·

### æ„å»ºä¸­ç›‘æ§
- [ ] è§‚å¯Ÿæ„å»ºæ—¥å¿—
- [ ] æ£€æŸ¥æ— é”™è¯¯å’Œè­¦å‘Š
- [ ] ç¡®è®¤æ–‡ä»¶ç”Ÿæˆ

### æ„å»ºåéªŒè¯
- [ ] æµ‹è¯•å®‰è£…åŒ…å®‰è£…
- [ ] éªŒè¯åº”ç”¨ç¨‹åºå¯åŠ¨
- [ ] æ£€æŸ¥å¿«æ·æ–¹å¼åˆ›å»º
- [ ] æµ‹è¯•åŸºæœ¬åŠŸèƒ½
- [ ] éªŒè¯å¸è½½è¿‡ç¨‹

## ğŸš€ å‘å¸ƒæµç¨‹

### 1. å‡†å¤‡å‘å¸ƒ
```bash
# æ›´æ–°ç‰ˆæœ¬å·
npm version patch  # æˆ– minor, major

# æäº¤æ›´æ”¹
git add .
git commit -m "chore: bump version to v2.0.6"
git push
```

### 2. åˆ›å»ºå‘å¸ƒ
```bash
# åˆ›å»ºå¹¶æ¨é€æ ‡ç­¾
git tag v2.0.6
git push origin v2.0.6
```

### 3. ç›‘æ§æ„å»º
1. è®¿é—® [GitHub Actions](https://github.com/miounet11/claude-code-manager/actions)
2. è§‚å¯Ÿæ„å»ºè¿›åº¦
3. æ£€æŸ¥æ„å»ºæ—¥å¿—

### 4. éªŒè¯å‘å¸ƒ
1. è®¿é—® [Releases é¡µé¢](https://github.com/miounet11/claude-code-manager/releases)
2. ç¡®è®¤æ–‡ä»¶å·²ä¸Šä¼ 
3. æµ‹è¯•ä¸‹è½½é“¾æ¥
4. éªŒè¯æ–‡ä»¶å®Œæ•´æ€§

## ğŸ“Š æ€§èƒ½ä¼˜åŒ–

### æ„å»ºä¼˜åŒ–
```json
{
  "build": {
    "compression": "maximum",
    "nsis": {
      "differentialPackage": false
    }
  }
}
```

### ç¼“å­˜ç­–ç•¥
- GitHub Actions è‡ªåŠ¨ç¼“å­˜ npm ä¾èµ–
- æœ¬åœ°ä½¿ç”¨ `npm ci` è€Œé `npm install`

## ğŸ” å®‰å…¨è€ƒè™‘

### ä»£ç ç­¾åï¼ˆæ¨èç”¨äºç”Ÿäº§ï¼‰
```json
{
  "build": {
    "win": {
      "certificateFile": "path/to/certificate.p12",
      "certificatePassword": "${CERT_PASSWORD}"
    }
  }
}
```

### ç—…æ¯’æ‰«æ
- æ„å»ºåè¿›è¡Œç—…æ¯’æ‰«æ
- ä¸Šä¼ å‰éªŒè¯æ–‡ä»¶å®‰å…¨æ€§

## ğŸ“ æŠ€æœ¯æ”¯æŒ

å¦‚é‡åˆ°æ„å»ºé—®é¢˜ï¼š
1. æŸ¥çœ‹ [GitHub Actions æ—¥å¿—](https://github.com/miounet11/claude-code-manager/actions)
2. è¿è¡Œæœ¬åœ°éªŒè¯è„šæœ¬
3. æ£€æŸ¥æœ¬æŒ‡å—çš„æ•…éšœæ’é™¤éƒ¨åˆ†
4. åœ¨ [GitHub Issues](https://github.com/miounet11/claude-code-manager/issues) åˆ›å»ºé—®é¢˜æŠ¥å‘Š

---

*æœ€åæ›´æ–°: 2025-07-23*