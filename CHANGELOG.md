# 更新日志

## [4.5.1] - 2025-07-28 - "Developer Experience Enhancement"

### 🎯 主要更新
改进开发者体验，完善项目文档和测试体系。

### ✨ 新功能
- **完善的 CLAUDE.md 文档**：
  - 添加所有测试脚本的详细说明
  - 补充完整的命令列表
  - 增加 AI 服务列表和动态路由使用示例
  - 添加测试脚本功能说明

### 🛠 改进
- **文档优化**：
  - 更新项目版本到 4.5.1
  - 完善分支管理说明
  - 增强开发指导的准确性
  - 添加更多代码位置引用

### 📝 开发体验
- 改进 Git Flow 工具的使用说明
- 增加了完整的测试命令文档
- 优化了项目架构说明的可读性

### 🧪 测试覆盖
- 8 个专门的测试脚本，覆盖所有核心功能
- 支持配置、环境检测、更新流程等测试
- 提供清晰的测试运行指南

## [4.3.1] - 2024-01-28 - "Windows Sync Update"

### 🎯 主要更新
完成 Windows 版本与 Mac 版本的完全同步，包含所有 v4.2.0 的新功能。

### ✨ 新功能
- **Windows 版本同步**：
  - ✅ 同步"保存并启用"功能
  - ✅ 同步"恢复默认配置"功能
  - ✅ 同步动态路径检测
  - ✅ 同步所有配置管理增强功能

### 🐛 修复
- 修复 Windows 环境检测中的路径问题
- 修复 npm bin -g 弃用警告
- 优化 Windows 下的 Claude CLI 检测逻辑

### 📦 Windows 特定改进
- 使用 ConPTY API 提供原生终端体验
- 优化 Windows 路径处理（AppData、Program Files）
- 改进 Windows 下的进程管理（taskkill）
- 添加 Windows 专用 README 文档

### 🔧 技术优化
- 移除所有用户特定硬编码路径
- 实现跨平台的动态路径检测
- 统一 Windows 和 Mac 的配置管理代码
- 改进错误处理和用户提示

## [4.2.1] - 2024-01-27 - "Smart Analytics"

### ✨ 新功能
- 智能分析系统
- 自动更新检查
- 使用统计面板
- 性能优化建议

## [4.2.0] - 2024-01-27 - "Enhanced Config Management"

### ✨ 新功能
- **保存并启用**：一键保存配置并启动 Claude
- **恢复默认配置**：快速恢复官方设置
- **动态路径检测**：自动检测系统路径
- **跨架构支持**：支持 Intel 和 Apple Silicon Mac

## [4.1.0] - 2024-01-26 - "Universal Bridge"

### 🎯 主要更新
将 Miaoda 从 Claude 专用工具升级为通用 AI 服务聚合平台，支持多种 AI 服务提供商和本地模型。

### ✨ 新功能

#### 1. 动态路由系统
- 实现 `/proxy/:service/:model/*` 格式的动态路由
- 支持运行时动态切换 AI 服务，无需重启
- 保持与现有配置系统的向后兼容性

#### 2. API 格式转换器
- 支持不同 AI 服务之间的 API 格式自动转换
- 已实现的转换：
  - Claude ↔ OpenAI
  - OpenAI ↔ Gemini
  - OpenAI ↔ Ollama
- 自动检测请求和响应格式

#### 3. 多服务预设支持
- 内置 7 个主流 AI 服务配置：
  - OpenAI (GPT-4, GPT-3.5)
  - Anthropic Claude (Opus, Sonnet, Haiku)
  - Google Gemini (Pro, Pro Vision)
  - Groq Cloud (Llama 2, Mixtral)
  - Ollama (本地模型)
  - Perplexity AI
  - 自定义服务
- 每个服务都包含预配置的模型列表和认证方式

#### 4. 配置向导
- 全新的分步骤配置向导界面
- 智能服务选择和模型推荐
- 实时连接测试和验证
- 支持本地服务自动检测

#### 5. 本地模型集成
- 完整支持 Ollama、LM Studio、LocalAI
- 自动检测本地运行的模型服务
- 模型管理功能（查看、拉取、删除）
- 无需 API Key 的本地推理

### 🛠 技术改进

#### 架构升级
- 模块化的服务抽象层
- 统一的 AI 服务接口
- 插件式的格式转换系统
- 改进的错误处理和重试机制

#### 新增核心模块
- `service-registry.js` - AI 服务注册和管理
- `format-converter.js` - API 格式转换引擎
- `local-model-service.js` - 本地模型服务管理
- `ConfigWizard.js` - 配置向导组件
- `LocalModelManager.js` - 本地模型管理 UI

### 🐛 修复
- 修复了代理服务器的内存泄漏问题
- 改进了大文件传输的稳定性
- 修复了某些情况下的认证失败问题

### 📝 文档
- 更新了 README，添加多服务使用说明
- 新增了服务配置指南
- 添加了 API 格式转换文档

### ⚠️ 注意事项
- 此版本完全向后兼容，现有配置无需修改
- 建议使用新的配置向导创建新配置
- 本地模型功能需要相应服务已安装并运行

---

## [4.0.0] - 2024-01-20

### 🎯 重大更新
从环境变量方式改为真正的 HTTP 代理服务器实现，大幅提升稳定性和功能性。

### ✨ 新功能
- **真实代理服务器**：使用 Express + http-proxy-middleware 实现
- **连接测试**：配置保存前可测试 API 连接
- **使用统计**：实时追踪 Token 使用量和费用
- **命令历史**：终端支持上下键浏览历史命令
- **友好错误处理**：提供具体的错误信息和解决方案

### 🛠 技术改进
- 重构代理实现，提升请求转发的可靠性
- 优化了配置管理的安全性
- 改进了终端输出的性能
- 升级了依赖包版本

---

## [3.0.2] - 2025-07-25

### 🐛 Bug 修复
- **修复终端空白问题**
  - 解决了终端页面加载后显示空白的问题
  - 修复了模块加载错误（XTerminal 和 TerminalTabs 的全局引用）
  - 修复了事件处理器中的全局对象引用

- **修复 PTY 会话管理**
  - 实现了完整的多会话 PTY 管理器
  - 修复了渲染进程和主进程之间的 IPC 通信
  - 支持会话 ID 的正确传递和处理
  - 终端现在能正确连接到本地 shell

- **修复自动执行 Claude 命令**
  - 终端初始化后会自动执行 claude 命令（如果配置了 API key）
  - 修复了命令执行时的会话 ID 传递问题

### 🔧 技术改进
- **代码质量提升**
  - 修复了所有 ESLint 错误（33 个问题全部解决）
  - 清理了内存泄漏（事件监听器和定时器）
  - 合并了冗余的环境检测文件
  - 实现了安全的 IPC 处理器管理机制

- **架构优化**
  - 添加了全局错误处理中间件
  - 错误自动记录到日志文件
  - 改进了资源释放机制

## [3.0.1] - 2025-07-25

### 🎉 新功能
- **VSCode 终端完美复刻**
  - 使用 xterm.js 实现与 VSCode 相同的终端体验
  - 支持真实的 Shell 环境（macOS 专用）
  - 完整的 ANSI 颜色支持和主题配色

- **多终端标签支持**
  - 支持创建多个独立的终端会话
  - 标签可拖拽重新排序
  - 双击标签可重命名
  - 右键菜单提供丰富的操作选项

- **增强的终端交互**
  - 状态栏显示当前路径、Shell 类型、终端尺寸等信息
  - 终端设置对话框（字体大小、字体系列、光标样式）
  - 设置自动保存，下次启动时自动应用

### ⚡ 优化改进
- **UI 优化**
  - 字体大小优化为 12px，更适合小屏幕
  - 行高调整为 1.1，显示更紧凑
  - 响应式布局设计
  - 优化了各组件的间距和边距

- **性能提升**
  - 使用 Canvas 渲染终端，大幅提升性能
  - 支持平滑滚动
  - 优化内存管理

### 🔧 技术改进
- 集成 node-pty 提供真正的终端体验
- 修复环境变量合并问题，确保 claude 命令正常运行
- 完善错误处理和用户提示

### 📋 快捷键
- `Ctrl/Cmd + T` - 新建终端
- `Ctrl/Cmd + W` - 关闭当前终端
- `Ctrl/Cmd + 1-9` - 快速切换终端
- `Ctrl/Cmd + K` - 清空当前终端
- `Ctrl/Cmd + C` - 复制选中文本
- `Ctrl/Cmd + V` - 粘贴

### 🐛 修复
- 修复 macOS "已损坏，无法打开" 错误
- 修复环境检测显示 "未安装" 的问题
- 修复 claude 命令无法运行的问题

### 🍎 macOS 专用版
- 移除 Windows 和 Linux 支持，专注于 macOS 平台优化
- 简化代码逻辑，提升性能和稳定性
- 采用 macOS 原生终端配置（zsh/bash）
- 修复终端输入无响应的问题

## [3.0.0] - 2025-07-24

### 🚀 全新架构
- 完全重构应用架构，采用模块化设计
- 主进程、渲染进程、预加载脚本独立管理
- 支持环境自动检测和安装

### ✨ 核心功能
- Claude CLI 管理和配置
- 多配置文件支持
- 免费试用功能（每日 100k token）
- 系统托盘支持

---

更早的版本记录请查看 Git 历史