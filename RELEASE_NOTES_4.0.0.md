# Miaoda 4.0.0 发布说明

## 🎉 重大更新

Miaoda 4.0.0 带来了全面的功能升级和用户体验优化，让您能够更高效地使用第三方 API 服务，大幅节省 Claude Code 的使用费用。

## ✨ 新增功能

### 1. 真正的 API 代理服务器
- 实现了本地代理服务器，完美拦截和转发 Claude CLI 的请求
- 自动处理认证信息转换，支持多种 API Key 格式
- 请求日志记录，方便调试和问题排查
- 智能端口分配，避免端口冲突

### 2. 增强的配置管理
- **测试连接功能**：一键测试 API 配置是否有效
- 实时显示连接延迟，帮助选择最佳 API 服务
- 支持多种认证方式（Bearer Token、API Key）
- 更友好的错误提示和解决方案

### 3. 使用统计和费用追踪
- 实时 Token 使用量统计
- 自动计算 API 使用费用
- 可视化使用趋势图表（最近7天）
- 按模型分类的费用分析
- 导出详细使用报表

### 4. 优化的终端体验
- 添加命令历史记录功能
- 支持搜索历史命令
- 改进的终端渲染性能
- 自动保存终端设置

### 5. 智能错误处理
- 友好的错误提示对话框
- 针对性的解决方案建议
- 错误日志自动记录
- 一键生成错误报告

### 6. 增强的安全性
- API Key 在传输过程中加密
- 敏感信息自动脱敏
- 请求签名验证机制
- 安全的本地存储

## 🔧 改进优化

### 性能提升
- 优化了启动速度
- 减少内存占用
- 改进了响应速度

### 用户体验
- 更直观的配置界面
- 实时状态反馈
- 优化的错误提示
- 统一的视觉风格

### 稳定性
- 修复了已知的崩溃问题
- 改进了错误恢复机制
- 增强了进程管理

## 📋 使用指南

### 配置第三方 API
1. 打开配置管理器
2. 创建新配置或编辑现有配置
3. 填写 API URL、API Key 和模型
4. 点击"测试连接"验证配置
5. 保存并使用配置

### 查看使用统计
1. 点击工具栏的统计图标
2. 查看实时使用数据
3. 分析费用趋势
4. 导出详细报表

### 使用代理功能
- 代理服务器会自动启动
- 支持自定义代理端口
- 实时监控代理状态
- 自动处理请求转发

## 🐛 已修复问题

- 修复了环境检测在某些系统上失败的问题
- 解决了配置切换时的内存泄漏
- 修复了终端在高 DPI 显示器上的渲染问题
- 解决了代理服务器偶尔无响应的问题

## 💡 注意事项

1. 升级后建议重新测试所有配置
2. 旧版本的统计数据会自动迁移
3. 首次使用代理功能时可能需要防火墙授权
4. 建议定期导出使用统计报表

## 🙏 致谢

感谢所有用户的反馈和支持，让 Miaoda 能够不断改进和完善。

如有任何问题或建议，欢迎通过 GitHub Issues 反馈。

---

**下载地址**: [GitHub Releases](https://github.com/miaooda/releases)
**文档**: [使用文档](https://github.com/miaooda/docs)
**支持**: support@miaoda.app